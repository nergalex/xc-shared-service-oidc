{
  "metadata": {
    "name": "shared-services-oidc",
    "namespace": "{{ extra_volterra_namespace }}",
    "labels": {
      "owner": "{{ extra_owner_email.split('@')[0] }}",
      "project": "cloudbuilder"
    },
    "description": "NGINX workshop",
    "disable": false
  },
  "spec": {
    "origin_servers": [
      {
        "k8s_service": {
          "service_name": "nginx-oidc-gw.{{ extra_namespace_shared_services }}",
          "site_locator": {
            "virtual_site": {
              "tenant": "{{ extra_volterra.tenant.full }}",
              "namespace": "shared",
              "name": "shared-service-oidc-gw"
            }
          },
          "vk8s_networks": {}
        },
        "labels": {}
      }
    ],
    "no_tls": {},
    "port": 8000,
    "same_as_endpoint_port": {},
    "healthcheck": [
      {
        "tenant": "{{ extra_volterra.tenant.full }}",
        "namespace": "shared",
        "name": "shared-services-oidc",
        "kind": "healthcheck"
      }
    ],
    "loadbalancer_algorithm": "LB_OVERRIDE",
    "endpoint_selection": "LOCAL_PREFERRED",
    "advanced_options": {
      "connection_timeout": 5000,
      "http_idle_timeout": 60000,
      "circuit_breaker": {
        "priority": "DEFAULT",
        "connection_limit": 1024,
        "pending_requests": 1024,
        "retries": 100,
        "max_requests": 1024
      },
      "disable_outlier_detection": {},
      "no_panic_threshold": {},
      "disable_subsets": {},
      "http1_config": {
        "header_transformation": {
          "preserve_case_header_transformation": {}
        }
      },
      "disable_lb_source_ip_persistance": {},
      "disable_proxy_protocol": {}
    }
  }
}